% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/qsr.R
\name{qsr}
\alias{qsr}
\title{Quintile Share Ratio Estimator}
\usage{
qsr(y, weights = NULL, type = 6, na.rm = TRUE)
}
\arguments{
\item{y}{A numeric vector of data values}

\item{weights}{A numeric vector of sampling weights (optional)}

\item{type}{Quantile estimation type: integer 4-9 or HD for Harrell-Davis (default: 6).
See \code{csquantile} documentation for a complete description.}

\item{na.rm}{Logical, should missing values be removed? (default: TRUE)}
}
\value{
A scalar numeric value representing the estimated inequality by the
quintile share ratio (QSR).
}
\description{
Computes the quintile share ratio (QSR) estimator for measuring inequality
on simple and complex sampling data
}
\details{
Consider a random sample \eqn{s} of size \eqn{n}, and let \eqn{w_j}, \eqn{j \in s}, define
the sampling weight and \eqn{y_j} be the observed characteristics (i.e. income)
associated to the \eqn{j}-th individual, \eqn{j = 1, \ldots, n}.
The QSR estimator is defined as:

\deqn{\widehat{QSR} =
\frac{\sum_{j \in s}w_j y_j \mathds{1}\left\{ y_j \geq \widehat{Q}(0.8)\right\} }{\sum_{j \in s} w_j y_j\mathds{1}\left\{ y_j \leq \widehat{Q}(0.2)\right\} }}

where the estimated quantiles \eqn{\widehat{Q}(p)} are computed via the function
\code{csquantile()}, which accounts for sampling weights and the specified
quantile type. This allows \eqn{\widehat{QSR}} to be used both for simple
random samples and for complex survey data with design weights.

See  \insertCite{langel2011quintile;textual}{inequantiles} for a complete review of the
QSR estimator with complex sampling data.
}
\examples{

data(synthouse)

eq <- synthouse$eq_income ### Income data

# Compute unweighted QSR with default type 6 quantile estimator
qsr(y = eq)

# Consider the sampling weights and change quantile estimation type
w <- synthouse$weight
qsr(y = eq, weights = w, type = 5)

# Compare QSR across macro-regions (NUTS1)
tapply(1:nrow(synthouse), synthouse$NUTS1, function(area) {
  qsr(y = synthouse$eq_income[area],
      weights = synthouse$weight[area],
      type = 6)
})

}
\references{
\insertRef{langel2011quintile}{inequantiles}
}
