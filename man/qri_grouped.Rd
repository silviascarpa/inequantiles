% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/qri_grouped.R
\name{qri_grouped}
\alias{qri_grouped}
\title{Quantile Ratio Rndex Estimator for Grouped (Binned) Data}
\usage{
qri_grouped(
  freq,
  lower_bounds,
  upper_bounds,
  J = 100,
  midpoints = NULL,
  na.rm = TRUE
)
}
\arguments{
\item{freq}{Numeric vector of class frequencies (counts). Must be non-negative.}

\item{lower_bounds}{Numeric vector of lower class bounds.}

\item{upper_bounds}{Numeric vector of upper class bounds.}

\item{J}{Integer, number of quantile ratios to average (default: 100).}

\item{midpoints}{Optional numeric vector of class midpoints. Used only as
fallback when a quantile class has zero frequency.}

\item{na.rm}{Logical, should missing values in frequencies be removed? (default: TRUE)}
}
\value{
A scalar numeric value representing the estimated inequality by the
quantile ratio index (QRI) for grouped data.
}
\description{
Computes the quantile ratio index (QRI) for measuring inequality from
grouped frequency data using linear interpolation for quantile estimation.
This function is intended to be used for administrative or tax data, which are
very often in the form of grouped (binned) data. Therefore, sampling weights are
not considered.
}
\details{
Consider grouped data divided into \eqn{L} classes with known boundaries and
observed frequencies \eqn{f_1, \ldots, f_L}. The QRI estimator for grouped
data is defined as:

\deqn{\widetilde{QRI}_{\text{grouped}} = \frac{1}{J}\sum_{j=1}^{J}\left(1 - \frac{\widetilde{Q}(p_j/2)}{\widetilde{Q}(1 - p_j/2)}\right)}

where:
\itemize{
\item \eqn{p_j = (j - 0.5)/J} for \eqn{j = 1, \ldots, J}
\item \eqn{\widetilde{Q}(p)} denotes the \eqn{p}-th quantile computed from
grouped data using linear interpolation (see \code{\link{quantile_grouped}})
\item \eqn{J} is the number of quantile ratios to average (default: 100)
}

The quantiles \eqn{\widetilde{Q}(p)} are computed via \code{quantile_grouped()},
which uses linear interpolation within classes and automatically handles
open-ended classes (with \code{-Inf} or \code{Inf} bounds).

The QRI ranges from 0 (perfect equality) to 1 (maximum inequality). The index
measures inequality by averaging the relative differences between symmetric quantiles
below and above the median, across the entire distribution.
}
\section{Comparison with Microdata QRI}{


When individual-level (microdata) are available, use \code{\link{qri}} instead,
which provides more accurate estimates. The grouped data version
\code{qri_grouped} should be used when only frequency distributions are available,
such as in published statistical tables or administrative aggregates.

The grouped QRI will generally approximate the microdata QRI well when:
\itemize{
\item Classes are sufficiently narrow
\item The distribution within classes is approximately uniform
\item Sample sizes within classes are adequate
}
}

\examples{
# Basic example with closed classes
income_freq <- c(120, 180, 150, 80, 40, 20, 10)
income_lower <- c(0, 15000, 30000, 45000, 60000, 80000, 100000)
income_upper <- c(15000, 30000, 45000, 60000, 80000, 100000, 150000)

qri_grouped(income_freq, income_lower, income_upper)

# Example with open-ended classes (Italian MEF-style data)
wage_freq <- c(150, 200, 180, 220, 180, 50, 15, 5)
wage_lower <- c(-Inf, 0, 10000, 15000, 26000, 55000, 75000, 120000)
wage_upper <- c(0, 10000, 15000, 26000, 55000, 75000, 120000, Inf)

# Compute QRI (automatically handles open classes)
qri_grouped(wage_freq, wage_lower, wage_upper)



}
\references{
\insertRef{prendergast2018simple}{inequantiles}
}
\seealso{
\code{\link{qri}} for QRI estimation with microdata.
\code{\link{quantile_grouped}} for quantile estimation from grouped data.

Other grouped data functions: 
\code{\link{quantile_grouped}()}
}
\concept{grouped data functions}
\concept{inequality measures}
