<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Quantile Ratio Rndex Estimator for Grouped (Binned) Data — qri_grouped • inequantiles</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Quantile Ratio Rndex Estimator for Grouped (Binned) Data — qri_grouped"><meta name="description" content="Computes the quantile ratio index (QRI) for measuring inequality from
grouped frequency data using linear interpolation for quantile estimation.
This function is intended to be used for administrative or tax data, which are
very often in the form of grouped (binned) data. Therefore, sampling weights are
not considered."><meta property="og:description" content="Computes the quantile ratio index (QRI) for measuring inequality from
grouped frequency data using linear interpolation for quantile estimation.
This function is intended to be used for administrative or tax data, which are
very often in the form of grouped (binned) data. Therefore, sampling weights are
not considered."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">inequantiles</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/inequantiles-intro.html">Introduction to inequantiles: Quantile-Based Inequality Measures for Survey Data</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Quantile Ratio Rndex Estimator for Grouped (Binned) Data</h1>

      <div class="d-none name"><code>qri_grouped.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Computes the quantile ratio index (QRI) for measuring inequality from
grouped frequency data using linear interpolation for quantile estimation.
This function is intended to be used for administrative or tax data, which are
very often in the form of grouped (binned) data. Therefore, sampling weights are
not considered.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">qri_grouped</span><span class="op">(</span></span>
<span>  <span class="va">freq</span>,</span>
<span>  <span class="va">lower_bounds</span>,</span>
<span>  <span class="va">upper_bounds</span>,</span>
<span>  M <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  midpoints <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-freq">freq<a class="anchor" aria-label="anchor" href="#arg-freq"></a></dt>
<dd><p>Numeric vector of class frequencies (counts). Must be non-negative.</p></dd>


<dt id="arg-lower-bounds">lower_bounds<a class="anchor" aria-label="anchor" href="#arg-lower-bounds"></a></dt>
<dd><p>Numeric vector of lower class bounds.</p></dd>


<dt id="arg-upper-bounds">upper_bounds<a class="anchor" aria-label="anchor" href="#arg-upper-bounds"></a></dt>
<dd><p>Numeric vector of upper class bounds.</p></dd>


<dt id="arg-m">M<a class="anchor" aria-label="anchor" href="#arg-m"></a></dt>
<dd><p>Integer, number of quantile ratios to average (default: 100).</p></dd>


<dt id="arg-midpoints">midpoints<a class="anchor" aria-label="anchor" href="#arg-midpoints"></a></dt>
<dd><p>Optional numeric vector of class midpoints. Used only as
fallback when a quantile class has zero frequency.</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>Logical, should missing values in frequencies be removed? (default: TRUE)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A scalar numeric value representing the estimated inequality by the
quantile ratio index (QRI) for grouped data.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Consider grouped data divided into \(L\) classes with known boundaries and
observed frequencies \(f_1, \ldots, f_L\). The QRI estimator for grouped
data is approximated as:</p>
<p>$${QRI} \approx \frac{1}{M}\sum_{m=1}^{M}\left(1 - \frac{\widetilde{Q}(p_m/2)}{\widetilde{Q}(1 - p_m/2)}\right)$$</p>
<p>where:</p><ul><li><p>\(p_m = (m - 0.5)/M\) for \(m=1, \ldots, M\)</p></li>
<li><p>\(\widetilde{Q}(p)\) denotes the \(p\)-th quantile computed from
grouped data using linear interpolation (see <code><a href="quantile_grouped.html">quantile_grouped</a></code>)</p></li>
<li><p>\(M\) is the number of quantile ratios to average (default: 100)</p></li>
</ul><p>The quantiles \(\widetilde{Q}(p)\) are computed via <code><a href="quantile_grouped.html">quantile_grouped()</a></code>,
which uses linear interpolation within classes and automatically handles
open-ended classes (with <code>-Inf</code> or <code>Inf</code> bounds).</p>
<p>The QRI ranges from 0 (perfect equality) to 1 (maximum inequality). The index
measures inequality by averaging the relative differences between symmetric quantiles
below and above the median, across the entire distribution.</p>
    </div>
    <div class="section level2">
    <h2 id="comparison-with-microdata-qri">Comparison with Microdata QRI<a class="anchor" aria-label="anchor" href="#comparison-with-microdata-qri"></a></h2>



<p>When individual-level (microdata) are available, use <code><a href="qri.html">qri</a></code> instead,
which provides more accurate estimates. The grouped data version
<code>qri_grouped</code> should be used when only frequency distributions are available,
such as in published statistical tables or administrative aggregates.</p>
<p>The grouped QRI will generally approximate the microdata QRI well when:</p><ul><li><p>Classes are sufficiently narrow</p></li>
<li><p>The distribution within classes is approximately uniform</p></li>
<li><p>Sample sizes within classes are adequate</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Prendergast LA, Staudte RG (2018).
“A simple and effective inequality measure.”
<em>The American Statistician</em>, <b>72</b>, 328–343.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="qri.html">qri</a></code> for QRI estimation with microdata.
<code><a href="quantile_grouped.html">quantile_grouped</a></code> for quantile estimation from grouped data.</p>
<p>Other grouped data functions:
<code><a href="quantile_grouped.html">quantile_grouped</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Basic example with closed classes</span></span></span>
<span class="r-in"><span><span class="va">income_freq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">180</span>, <span class="fl">150</span>, <span class="fl">80</span>, <span class="fl">40</span>, <span class="fl">20</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">income_lower</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">15000</span>, <span class="fl">30000</span>, <span class="fl">45000</span>, <span class="fl">60000</span>, <span class="fl">80000</span>, <span class="fl">100000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">income_upper</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15000</span>, <span class="fl">30000</span>, <span class="fl">45000</span>, <span class="fl">60000</span>, <span class="fl">80000</span>, <span class="fl">100000</span>, <span class="fl">150000</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">qri_grouped</span><span class="op">(</span><span class="va">income_freq</span>, <span class="va">income_lower</span>, <span class="va">income_upper</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.5888192</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example with open-ended classes (Italian MEF-style data)</span></span></span>
<span class="r-in"><span><span class="va">wage_freq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">150</span>, <span class="fl">200</span>, <span class="fl">180</span>, <span class="fl">220</span>, <span class="fl">180</span>, <span class="fl">50</span>, <span class="fl">15</span>, <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wage_lower</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">0</span>, <span class="fl">10000</span>, <span class="fl">15000</span>, <span class="fl">26000</span>, <span class="fl">55000</span>, <span class="fl">75000</span>, <span class="fl">120000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wage_upper</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10000</span>, <span class="fl">15000</span>, <span class="fl">26000</span>, <span class="fl">55000</span>, <span class="fl">75000</span>, <span class="fl">120000</span>, <span class="cn">Inf</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compute QRI (automatically handles open classes)</span></span></span>
<span class="r-in"><span><span class="fu">qri_grouped</span><span class="op">(</span><span class="va">wage_freq</span>, <span class="va">wage_lower</span>, <span class="va">wage_upper</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.7268536</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Silvia Scarpa.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

