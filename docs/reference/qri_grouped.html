<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Quantile Ratio Rndex Estimator for Grouped (Binned) Data — qri_grouped • inequantiles</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Quantile Ratio Rndex Estimator for Grouped (Binned) Data — qri_grouped"><meta property="og:description" content="Computes the quantile ratio index (QRI) for measuring inequality from
grouped frequency data using linear interpolation for quantile estimation.
This function is intended to be used for administrative or tax data, which are
very often in the form of grouped (binned) data. Therefore, sampling weights are
not considered."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">inequantiles</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/inequantiles-intro.html">Introduction to inequantiles: Quantile-Based Inequality Measures for Survey Data</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Quantile Ratio Rndex Estimator for Grouped (Binned) Data</h1>

    <div class="hidden name"><code>qri_grouped.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Computes the quantile ratio index (QRI) for measuring inequality from
grouped frequency data using linear interpolation for quantile estimation.
This function is intended to be used for administrative or tax data, which are
very often in the form of grouped (binned) data. Therefore, sampling weights are
not considered.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">qri_grouped</span><span class="op">(</span></span>
<span>  <span class="va">freq</span>,</span>
<span>  <span class="va">lower_bounds</span>,</span>
<span>  <span class="va">upper_bounds</span>,</span>
<span>  M <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  midpoints <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-freq">freq<a class="anchor" aria-label="anchor" href="#arg-freq"></a></dt>
<dd><p>Numeric vector of class frequencies (counts). Must be non-negative.</p></dd>


<dt id="arg-lower-bounds">lower_bounds<a class="anchor" aria-label="anchor" href="#arg-lower-bounds"></a></dt>
<dd><p>Numeric vector of lower class bounds.</p></dd>


<dt id="arg-upper-bounds">upper_bounds<a class="anchor" aria-label="anchor" href="#arg-upper-bounds"></a></dt>
<dd><p>Numeric vector of upper class bounds.</p></dd>


<dt id="arg-m">M<a class="anchor" aria-label="anchor" href="#arg-m"></a></dt>
<dd><p>Integer, number of quantile ratios to average (default: 100).</p></dd>


<dt id="arg-midpoints">midpoints<a class="anchor" aria-label="anchor" href="#arg-midpoints"></a></dt>
<dd><p>Optional numeric vector of class midpoints. Used only as
fallback when a quantile class has zero frequency.</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>Logical, should missing values in frequencies be removed? (default: TRUE)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A scalar numeric value representing the estimated inequality by the
quantile ratio index (QRI) for grouped data.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Consider grouped data divided into \(L\) classes with known boundaries and
observed frequencies \(f_1, \ldots, f_L\). The QRI estimator for grouped
data is approximated as:</p>
<p>$${QRI} \approx \frac{1}{M}\sum_{m=1}^{M}\left(1 - \frac{\widetilde{Q}(p_m/2)}{\widetilde{Q}(1 - p_m/2)}\right)$$</p>
<p>where:</p><ul><li><p>\(p_m = (m - 0.5)/M\) for \(m=1, \ldots, M\)</p></li>
<li><p>\(\widetilde{Q}(p)\) denotes the \(p\)-th quantile computed from
grouped data using linear interpolation (see <code><a href="quantile_grouped.html">quantile_grouped</a></code>)</p></li>
<li><p>\(M\) is the number of quantile ratios to average (default: 100)</p></li>
</ul><p>The quantiles \(\widetilde{Q}(p)\) are computed via <code><a href="quantile_grouped.html">quantile_grouped()</a></code>,
which uses linear interpolation within classes and automatically handles
open-ended classes (with <code>-Inf</code> or <code>Inf</code> bounds).</p>
<p>The QRI ranges from 0 (perfect equality) to 1 (maximum inequality). The index
measures inequality by averaging the relative differences between symmetric quantiles
below and above the median, across the entire distribution.</p>
    </div>
    <div id="comparison-with-microdata-qri">
    <h2>Comparison with Microdata QRI</h2>



<p>When individual-level (microdata) are available, use <code><a href="qri.html">qri</a></code> instead,
which provides more accurate estimates. The grouped data version
<code>qri_grouped</code> should be used when only frequency distributions are available,
such as in published statistical tables or administrative aggregates.</p>
<p>The grouped QRI will generally approximate the microdata QRI well when:</p><ul><li><p>Classes are sufficiently narrow</p></li>
<li><p>The distribution within classes is approximately uniform</p></li>
<li><p>Sample sizes within classes are adequate</p></li>
</ul></div>
    <div id="references">
    <h2>References</h2>
    <p>Prendergast LA, Staudte RG (2018).
“A simple and effective inequality measure.”
<em>The American Statistician</em>, <b>72</b>, 328–343.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="qri.html">qri</a></code> for QRI estimation with microdata.
<code><a href="quantile_grouped.html">quantile_grouped</a></code> for quantile estimation from grouped data.</p>
<p>Other grouped data functions:
<code><a href="quantile_grouped.html">quantile_grouped</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Basic example with closed classes</span></span></span>
<span class="r-in"><span><span class="va">income_freq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">180</span>, <span class="fl">150</span>, <span class="fl">80</span>, <span class="fl">40</span>, <span class="fl">20</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">income_lower</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">15000</span>, <span class="fl">30000</span>, <span class="fl">45000</span>, <span class="fl">60000</span>, <span class="fl">80000</span>, <span class="fl">100000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">income_upper</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15000</span>, <span class="fl">30000</span>, <span class="fl">45000</span>, <span class="fl">60000</span>, <span class="fl">80000</span>, <span class="fl">100000</span>, <span class="fl">150000</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">qri_grouped</span><span class="op">(</span><span class="va">income_freq</span>, <span class="va">income_lower</span>, <span class="va">income_upper</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.5888192</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example with open-ended classes (Italian MEF-style data)</span></span></span>
<span class="r-in"><span><span class="va">wage_freq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">150</span>, <span class="fl">200</span>, <span class="fl">180</span>, <span class="fl">220</span>, <span class="fl">180</span>, <span class="fl">50</span>, <span class="fl">15</span>, <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wage_lower</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">0</span>, <span class="fl">10000</span>, <span class="fl">15000</span>, <span class="fl">26000</span>, <span class="fl">55000</span>, <span class="fl">75000</span>, <span class="fl">120000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wage_upper</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10000</span>, <span class="fl">15000</span>, <span class="fl">26000</span>, <span class="fl">55000</span>, <span class="fl">75000</span>, <span class="fl">120000</span>, <span class="cn">Inf</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compute QRI (automatically handles open classes)</span></span></span>
<span class="r-in"><span><span class="fu">qri_grouped</span><span class="op">(</span><span class="va">wage_freq</span>, <span class="va">wage_lower</span>, <span class="va">wage_upper</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.7268536</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Silvia Scarpa.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

